---
import { padNumber } from "../../utils";

interface Props {
  title: string;
  category: string;
  year: string;
  index: number;
  tech: string[];
}

const { title, category, year, index, tech } = Astro.props;
const formattedIndex = padNumber(index + 1);
---

<article
  class="project-card group relative cursor-none border-b border-foreground/20 hover:border-accent/50 transition-colors duration-500"
  data-index={index}
  data-project-card
  data-cursor="VIEW"
>
  {/* Main Content */}
  <div class="relative py-10 md:py-14 px-6 md:px-10">
    
    <div class="grid grid-cols-12 gap-4 md:gap-6 items-end">
      
      {/* Index Column */}
      <div class="col-span-2 md:col-span-1">
        <span 
          class="card-index font-mono text-[10px] tracking-[0.4em] text-foreground/40 group-hover:text-accent transition-colors duration-500"
        >
          {formattedIndex}
        </span>
      </div>

      {/* Title Column */}
      <div class="col-span-10 md:col-span-9">
        {/* Category */}
        <div class="mb-2 flex items-center gap-2">
          <span class="font-mono text-[10px] tracking-[0.4em] uppercase text-foreground/50 group-hover:text-accent transition-colors duration-500">
            {category}
          </span>
          <span class="flex-1 h-px bg-foreground/10 group-hover:bg-accent/30 transition-colors duration-500 max-w-[60px]"></span>
        </div>

        {/* Main Title */}
        <h3 
          class="card-title text-[2.5rem] sm:text-[3rem] md:text-[4rem] lg:text-[6rem] xl:text-[7rem] font-black uppercase leading-[0.8] tracking-[-0.04em] text-foreground group-hover:text-accent transition-colors duration-500"
        >
          {title}
        </h3>
        
        {/* Year */}
        <div class="mt-3 flex items-center gap-3">
          <span class="font-mono text-sm tracking-widest text-foreground/50 group-hover:text-accent transition-colors duration-500">
            {year}
          </span>
        </div>
      </div>

      {/* Tech & Arrow Column */}
      <div class="col-span-12 md:col-span-2 flex flex-row md:flex-col items-end justify-between gap-4">
        {/* Tech Tags */}
        <div class="flex flex-wrap justify-end gap-2">
          {tech.map((item) => (
            <span 
              class="font-mono text-[9px] tracking-[0.15em] uppercase text-foreground/40 group-hover:text-accent transition-colors duration-500"
            >
              {item}
            </span>
          ))}
        </div>
        
        {/* Arrow */}
        <div class="view-arrow w-8 h-8 border border-foreground/30 group-hover:border-accent group-hover:bg-accent flex items-center justify-center transition-all duration-300">
          <svg 
            class="w-3 h-3 text-foreground/60 group-hover:text-background transition-colors duration-300" 
            fill="none" 
            stroke="currentColor" 
            viewBox="0 0 24 24"
          >
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 17L17 7M17 7H7M17 7V17"></path>
          </svg>
        </div>
      </div>
    </div>
  </div>

  {/* Accent line on hover */}
  <div class="absolute bottom-0 left-0 h-[2px] bg-accent w-0 group-hover:w-full transition-all duration-500 ease-out"></div>
</article>

<style>
  .project-card {
    will-change: transform;
    background: transparent;
  }

  .card-title {
    font-feature-settings: "kern" 1;
    text-rendering: optimizeLegibility;
  }

  /* Selection styling */
  .project-card ::selection {
    background: white;
    color: black;
  }
</style>
