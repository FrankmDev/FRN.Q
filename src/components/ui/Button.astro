---
interface Props {
  variant?: "primary" | "secondary" | "outline" | "ghost";
  size?: "sm" | "md" | "lg";
  href?: string;
  type?: "button" | "submit" | "reset";
  class?: string;
  external?: boolean;
}

const {
  variant = "primary",
  size = "md",
  href,
  type = "button",
  class: className = "",
  external = false,
} = Astro.props;

const baseStyles = "relative inline-flex items-center justify-center font-display font-semibold tracking-wider overflow-hidden transition-all duration-300 group";

const variants = {
  primary: "bg-foreground text-background border border-foreground hover:bg-accent hover:border-accent hover:text-accent-foreground",
  secondary: "bg-secondary text-secondary-foreground border border-border hover:border-accent hover:text-accent",
  outline: "bg-transparent text-foreground border border-foreground hover:bg-foreground hover:text-background",
  ghost: "bg-transparent text-foreground border border-transparent hover:border-border hover:bg-secondary/30",
};

const sizes = {
  sm: "px-4 py-2 text-xs",
  md: "px-6 py-3 text-sm",
  lg: "px-8 py-4 text-base",
};

const classes = `${baseStyles} ${variants[variant]} ${sizes[size]} ${className}`;

const externalProps = external ? { target: "_blank", rel: "noopener noreferrer" } : {};
---

{
  href ? (
    <a href={href} class={classes} {...externalProps} data-cursor="CLICK">
      <span class="relative z-10 flex items-center gap-2">
        <slot />
      </span>
      {/* Hover fill effect */}
      <span class="absolute inset-0 bg-accent transform scale-x-0 origin-left group-hover:scale-x-100 transition-transform duration-300 ease-out -z-0" />
      {/* Shine effect */}
      <span class="absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 -z-0"
        style="background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent); transform: translateX(-100%); animation: shine 0.6s ease-out;"
      />
    </a>
  ) : (
    <button type={type} class={classes} data-cursor="CLICK">
      <span class="relative z-10 flex items-center gap-2">
        <slot />
      </span>
      {/* Hover fill effect */}
      <span class="absolute inset-0 bg-accent transform scale-x-0 origin-left group-hover:scale-x-100 transition-transform duration-300 ease-out -z-0" />
      {/* Shine effect */}
      <span class="absolute inset-0 opacity-0 group-hover:opacity-100 transition-opacity duration-500 -z-0"
        style="background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent); transform: translateX(-100%);"
      />
    </button>
  )
}

<style>
  @keyframes shine {
    from {
      transform: translateX(-100%);
    }
    to {
      transform: translateX(100%);
    }
  }

  a:hover span:last-child,
  button:hover span:last-child {
    animation: shine 0.6s ease-out;
  }

  /* Active state */
  a:active,
  button:active {
    transform: scale(0.98);
  }

  /* Focus visible for accessibility */
  a:focus-visible,
  button:focus-visible {
    outline: 2px solid hsl(var(--accent));
    outline-offset: 2px;
  }
</style>
